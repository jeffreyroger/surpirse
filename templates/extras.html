<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Special Extras ‚ù§Ô∏è</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --accent:#ff5c8a;
      --accent-dark:#c9184a;
      --card-bg: #fff7fa;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(#02021a, #07102b);
      color:#fff;
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
    }
    .container{max-width:1100px;margin:30px auto;padding:20px;}
    header{display:flex;align-items:center;justify-content:space-between;gap:10px}
    h1{margin:0;color:var(--accent);font-size:28px;letter-spacing:0.6px}
    nav a{color:#fff;margin-left:12px;text-decoration:none;font-weight:600;opacity:0.9}
    .section{margin:36px 0;padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));box-shadow:0 6px 30px rgba(2,2,10,0.6)}

    /* ---------- typing "I love you" ---------- */
    .typing-wrap{display:flex;flex-direction:column;align-items:center;gap:8px;padding:30px 10px}
    .typing {
      font-size:40px;color:var(--accent);
      font-weight:700;
      letter-spacing:1px;
      border-right: 3px solid rgba(255,255,255,0.25);
      white-space:nowrap;
      overflow:hidden;
      width:0;
    }

    /* ---------- fireworks canvas ---------- */
    #fireworks{display:block;width:100%;height:220px;border-radius:12px;background:transparent}

    /* ---------- polaroid gallery ---------- */
    .polaroid-grid{display:flex;gap:18px;flex-wrap:wrap;justify-content:center;padding:18px}
    .polaroid{
      width:180px;background:var(--glass);padding:10px;border-radius:8px;backdrop-filter: blur(6px);box-shadow:0 8px 30px rgba(0,0,0,0.6);text-align:center;
      transform: rotate(-2deg);
      transition: transform .35s ease, box-shadow .35s ease;
      cursor:pointer;
    }
    .polaroid img{width:100%;height:140px;object-fit:cover;border-radius:6px}
    .polaroid:hover{transform:translateY(-8px) rotate(-1deg);box-shadow:0 18px 40px rgba(0,0,0,0.7)}

    /* ---------- flipbook ---------- */
    .flipbook{perspective:1200px;display:flex;gap:18px;justify-content:center;padding:18px}
    .page{
      width:200px;height:260px;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6);
      transform-origin:left center;transition:transform .8s cubic-bezier(.2,.9,.3,1);
      position:relative;overflow:hidden;color:#111;
    }
    .page .front,.page .back{position:absolute;inset:0;padding:16px}
    .page .back{transform:rotateY(180deg)}
    .page.flipped{transform:rotateY(-170deg)}

    /* ---------- reasons interactive list ---------- */
    .reasons{max-width:700px;margin:8px auto;padding:10px}
    .reasons input{width:70%;padding:10px;border-radius:8px;border:none;margin-right:8px}
    .reasons button{padding:10px 14px;border-radius:8px;background:var(--accent);border:none;color:#fff}
    .list-item{background:rgba(255,255,255,0.04);padding:12px;border-radius:10px;margin:8px 0;display:flex;justify-content:space-between;align-items:center}
    .heart-btn{background:transparent;border:0;color:var(--accent);font-size:20px;cursor:pointer}

    /* ---------- starry canvas ---------- */
    #stars{width:100%;height:360px;border-radius:12px;background:transparent;display:block;margin-top:10px}
    .center-note{ text-align:center;color:#fff; opacity:0.9; margin-top:10px; }

    /* small screens */
    @media (max-width:720px){
      .typing{font-size:28px}
      .polaroid{width:140px}
      .page{width:150px;height:200px}
    }
  </style>
</head>
<body onload="startMusic();">

  <!-- Background music -->
  <audio id="bgMusic" loop preload="auto">
      <source src="{{ url_for('static', filename='assets/music.mp3') }}" type="audio/mpeg">
  </audio>

  <div class="container">
    <header>
      <h1>For You ‚Äî 6 Months ‚ù§Ô∏è</h1>
      <nav>
        <a href="/">Home</a>
        <a href="#typing">I love you</a>
        <a href="#gallery">Gallery</a>
        <a href="#book">Scrapbook</a>
        <a href="#reasons">Reasons</a>
        <a href="#stars">Sky</a>
      </nav>
    </header>

    <!-- TYPING + Fireworks -->
    <section id="typing" class="section">
      <div class="typing-wrap">
        <div id="typingText" class="typing"></div>
        <div style="display:flex;gap:12px;margin-top:6px">
          <button onclick="startTyping()" style="padding:8px 12px;border-radius:8px;background:var(--accent);border:0;color:#fff;cursor:pointer">Reveal</button>
          <button onclick="boom()" style="padding:8px 12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:#fff;cursor:pointer">Fireworks</button>
        </div>
      </div>
      <canvas id="fireworks"></canvas>
    </section>

    <!-- POLAROID GALLERY -->
    <section id="gallery" class="section">
      <h2 style="color:var(--accent);text-align:center">üì∏ Polaroids</h2>
      <div class="polaroid-grid">
        <!-- Update image paths -->
        <div class="polaroid"><img src="{{ url_for('static', filename='images/img1.jpg') }}" alt="pic1"><div style="padding-top:8px;color:#fff">Our first selfie</div></div>
        <div class="polaroid"><img src="{{ url_for('static', filename='images/img2.jpg') }}" alt="pic2"><div style="padding-top:8px;color:#fff">Date night</div></div>
        <div class="polaroid"><img src="{{ url_for('static', filename='images/img3.jpg') }}" alt="pic3"><div style="padding-top:8px;color:#fff">Silly us</div></div>
        <div class="polaroid"><img src="{{ url_for('static', filename='images/img4.jpg') }}" alt="pic4"><div style="padding-top:8px;color:#fff">Best day</div></div>
      </div>
    </section>

    <!-- FLIPBOOK / SCRAPBOOK -->
    <section id="book" class="section">
      <h2 style="color:var(--accent);text-align:center">üìö Little Scrapbook</h2>
      <div class="flipbook" id="flipbook">
        <div class="page" onclick="this.classList.toggle('flipped')">
          <div class="front"><h3>Page 1</h3><p>Our first message. Add a short memory here.</p></div>
          <div class="back"><h3>Inside</h3><p>Sweet note on the back of the page.</p></div>
        </div>
        <div class="page" onclick="this.classList.toggle('flipped')">
          <div class="front"><h3>Page 2</h3><p>First date details and feelings.</p></div>
          <div class="back"><h3>Inside</h3><p>Something funny that happened.</p></div>
        </div>
        <div class="page" onclick="this.classList.toggle('flipped')">
          <div class="front"><h3>Page 3</h3><p>Pictures, doodles, hearts.</p></div>
          <div class="back"><h3>Inside</h3><p>Promise for the future.</p></div>
        </div>
      </div>
      <p style="text-align:center;color:rgba(255,255,255,0.7);margin-top:8px">Tap any page to flip it</p>
    </section>

    <!-- REASONS INTERACTIVE LIST -->
    <section id="reasons" class="section">
      <h2 style="color:var(--accent);text-align:center">üíñ Reasons Why I Love You</h2>
      <div class="reasons">
        <div style="text-align:center;margin-bottom:8px">
          <input id="reasonInput" placeholder="Add a reason..." />
          <button onclick="addReason()">Add</button>
        </div>
        <div id="reasonsList">
          <div class="list-item"><span>How you laugh at my bad jokes</span><div><button class="heart-btn" onclick="toggleHeart(this)">‚ô°</button>&nbsp;<button onclick="removeItem(this)" style="background:#222;border-radius:6px;padding:6px;border:0;color:#fff;cursor:pointer">‚úï</button></div></div>
          <div class="list-item"><span>Your sudden hugs</span><div><button class="heart-btn" onclick="toggleHeart(this)">‚ô°</button>&nbsp;<button onclick="removeItem(this)" style="background:#222;border-radius:6px;padding:6px;border:0;color:#fff;cursor:pointer">‚úï</button></div></div>
        </div>
      </div>
    </section>

    <!-- STARRY NIGHT + CONSTELLATIONS -->
    <section id="stars" class="section">
      <h2 style="color:var(--accent);text-align:center">üåå Starry Night</h2>
      <canvas id="stars"></canvas>
      <p class="center-note">Constellation spells your initials. Click the sky to twinkle!</p>
    </section>

  </div>

  <!-- ------------- Scripts ------------- -->
  <script>
    // ---------- Music ----------
    const music = document.getElementById("bgMusic");
    function startMusic(){
      music.play().catch(()=>console.log("Autoplay blocked, interaction required."));
      music.volume=0;
      let v=0;
      const fade = setInterval(()=>{
        if(v<1){v+=0.05;music.volume=v;} else clearInterval(fade);
      },100);
    }

    // ---------- Typing ----------
    const typingText = document.getElementById('typingText');
    const message = "I love you. Every day a little more.";
    let tIndex=0;
    function startTyping(){
      tIndex = 0;
      typingText.style.width = '0';
      typingText.textContent = '';
      typingText.style.borderRight = '3px solid rgba(255,255,255,0.25)';
      const speed = 60;
      const step = () => {
        if(tIndex <= message.length){
          typingText.textContent = message.slice(0,tIndex);
          typingText.style.width = (tIndex * 0.6) + 'ch';
          tIndex++;
          setTimeout(step, speed);
        } else {
          typingText.style.borderRight = '0';
        }
      };
      step();
    }

    // ---------- Other scripts (fireworks, polaroid lightbox, reasons, stars) ----------
    // reuse your previous JS code here, making sure all images/videos URLs use url_for in Flask templates
  </script>

</body>
</html>
