<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Special Extras ‚ù§Ô∏è</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* ---------- Page basics ---------- */
    :root{
      --accent:#ff5c8a;
      --accent-dark:#c9184a;
      --card-bg: #fff7fa;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(#02021a, #07102b);
      color:#fff;
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
    }
    .container{max-width:1100px;margin:30px auto;padding:20px;}

    header{display:flex;align-items:center;justify-content:space-between;gap:10px}
    h1{margin:0;color:var(--accent);font-size:28px;letter-spacing:0.6px}
    nav a{color:#fff;margin-left:12px;text-decoration:none;font-weight:600;opacity:0.9}
    .section{margin:36px 0;padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));box-shadow:0 6px 30px rgba(2,2,10,0.6)}

    /* ---------- typing "I love you" ---------- */
    .typing-wrap{display:flex;flex-direction:column;align-items:center;gap:8px;padding:30px 10px}
    .typing {
      font-size:40px;color:var(--accent);
      font-weight:700;
      letter-spacing:1px;
      border-right: 3px solid rgba(255,255,255,0.25);
      white-space:nowrap;
      overflow:hidden;
      width:0;
    }

    /* ---------- fireworks canvas ---------- */
    #fireworks{display:block;width:100%;height:220px;border-radius:12px;background:transparent}

    /* ---------- polaroid gallery ---------- */
    .polaroid-grid{display:flex;gap:18px;flex-wrap:wrap;justify-content:center;padding:18px}
    .polaroid{
      width:180px;background:var(--glass);padding:10px;border-radius:8px;backdrop-filter: blur(6px);box-shadow:0 8px 30px rgba(0,0,0,0.6);text-align:center;
      transform: rotate(-2deg);
      transition: transform .35s ease, box-shadow .35s ease;
      cursor:pointer;
    }
    .polaroid img{width:100%;height:140px;object-fit:cover;border-radius:6px}
    .polaroid:hover{transform:translateY(-8px) rotate(-1deg);box-shadow:0 18px 40px rgba(0,0,0,0.7)}

    /* ---------- flipbook ---------- */
    .flipbook{perspective:1200px;display:flex;gap:18px;justify-content:center;padding:18px}
    .page{
      width:200px;height:260px;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6);
      transform-origin:left center;transition:transform .8s cubic-bezier(.2,.9,.3,1);
      position:relative;overflow:hidden;color:#111;
    }
    .page .front,.page .back{position:absolute;inset:0;padding:16px}
    .page .back{transform:rotateY(180deg)}
    .page.flipped{transform:rotateY(-170deg)}

    /* ---------- reasons interactive list ---------- */
    .reasons{max-width:700px;margin:8px auto;padding:10px}
    .reasons input{width:70%;padding:10px;border-radius:8px;border:none;margin-right:8px}
    .reasons button{padding:10px 14px;border-radius:8px;background:var(--accent);border:none;color:#fff}
    .list-item{background:rgba(255,255,255,0.04);padding:12px;border-radius:10px;margin:8px 0;display:flex;justify-content:space-between;align-items:center}
    .heart-btn{background:transparent;border:0;color:var(--accent);font-size:20px;cursor:pointer}

    /* ---------- starry canvas ---------- */
    #stars{width:100%;height:360px;border-radius:12px;background:transparent;display:block;margin-top:10px}
    .center-note{ text-align:center;color:#fff; opacity:0.9; margin-top:10px; }

    /* small screens */
    @media (max-width:720px){
      .typing{font-size:28px}
      .polaroid{width:140px}
      .page{width:150px;height:200px}
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <h1>For You ‚Äî 6 Months ‚ù§Ô∏è</h1>
      <nav>
        <a href="/">Home</a>
        <a href="#typing">I love you</a>
        <a href="#gallery">Gallery</a>
        <a href="#book">Scrapbook</a>
        <a href="#reasons">Reasons</a>
        <a href="#stars">Sky</a>
      </nav>
    </header>

    <!-- TYPING + Fireworks -->
    <section id="typing" class="section">
      <div class="typing-wrap">
        <div id="typingText" class="typing"></div>
        <div style="display:flex;gap:12px;margin-top:6px">
          <button onclick="startTyping()" style="padding:8px 12px;border-radius:8px;background:var(--accent);border:0;color:#fff;cursor:pointer">Reveal</button>
          <button onclick="boom()" style="padding:8px 12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:#fff;cursor:pointer">Fireworks</button>
        </div>
      </div>
      <canvas id="fireworks"></canvas>
    </section>

    <!-- POLAROID GALLERY -->
    <section id="gallery" class="section">
      <h2 style="color:var(--accent);text-align:center">üì∏ Polaroids</h2>
      <div class="polaroid-grid">
        <!-- Update image paths to your static images -->
        <div class="polaroid"><img src="/static/img1.jpg" alt="pic1"><div style="padding-top:8px;color:#fff">Our first selfie</div></div>
        <div class="polaroid"><img src="/static/img2.jpg" alt="pic2"><div style="padding-top:8px;color:#fff">Date night</div></div>
        <div class="polaroid"><img src="/static/img3.jpg" alt="pic3"><div style="padding-top:8px;color:#fff">Silly us</div></div>
        <div class="polaroid"><img src="/static/img4.jpg" alt="pic4"><div style="padding-top:8px;color:#fff">Best day</div></div>
      </div>
    </section>

    <!-- FLIPBOOK / SCRAPBOOK -->
    <section id="book" class="section">
      <h2 style="color:var(--accent);text-align:center">üìö Little Scrapbook</h2>
      <div class="flipbook" id="flipbook">
        <div class="page" onclick="this.classList.toggle('flipped')">
          <div class="front"><h3>Page 1</h3><p>Our first message. Add a short memory here.</p></div>
          <div class="back"><h3>Inside</h3><p>Sweet note on the back of the page.</p></div>
        </div>

        <div class="page" onclick="this.classList.toggle('flipped')">
          <div class="front"><h3>Page 2</h3><p>First date details and feelings.</p></div>
          <div class="back"><h3>Inside</h3><p>Something funny that happened.</p></div>
        </div>

        <div class="page" onclick="this.classList.toggle('flipped')">
          <div class="front"><h3>Page 3</h3><p>Pictures, doodles, hearts.</p></div>
          <div class="back"><h3>Inside</h3><p>Promise for the future.</p></div>
        </div>
      </div>
      <p style="text-align:center;color:rgba(255,255,255,0.7);margin-top:8px">Tap any page to flip it</p>
    </section>

    <!-- REASONS INTERACTIVE LIST -->
    <section id="reasons" class="section">
      <h2 style="color:var(--accent);text-align:center">üíñ Reasons Why I Love You</h2>
      <div class="reasons">
        <div style="text-align:center;margin-bottom:8px">
          <input id="reasonInput" placeholder="Add a reason..." />
          <button onclick="addReason()">Add</button>
        </div>
        <div id="reasonsList">
          <!-- initial reasons -->
          <div class="list-item"><span>How you laugh at my bad jokes</span><div><button class="heart-btn" onclick="toggleHeart(this)">‚ô°</button>&nbsp;<button onclick="removeItem(this)" style="background:#222;border-radius:6px;padding:6px;border:0;color:#fff;cursor:pointer">‚úï</button></div></div>
          <div class="list-item"><span>Your sudden hugs</span><div><button class="heart-btn" onclick="toggleHeart(this)">‚ô°</button>&nbsp;<button onclick="removeItem(this)" style="background:#222;border-radius:6px;padding:6px;border:0;color:#fff;cursor:pointer">‚úï</button></div></div>
        </div>
      </div>
    </section>

    <!-- STARRY NIGHT + CONSTELLATIONS -->
    <section id="stars" class="section">
      <h2 style="color:var(--accent);text-align:center">üåå Starry Night</h2>
      <canvas id="stars"></canvas>
      <p class="center-note">Constellation spells your initials. Click the sky to twinkle!</p>
    </section>

  </div>

  <!-- ------------- Scripts ------------- -->
  <script>
    /* ---------- typing animation ---------- */
    const typingText = document.getElementById('typingText');
    const message = "I love you. Every day a little more.";
    let tIndex=0;
    function startTyping(){
      tIndex = 0;
      typingText.style.width = '0';
      typingText.textContent = '';
      typingText.style.borderRight = '3px solid rgba(255,255,255,0.25)';
      const speed = 60;
      const step = () => {
        if(tIndex <= message.length){
          typingText.textContent = message.slice(0,tIndex);
          typingText.style.width = (tIndex * 0.6) + 'ch';
          tIndex++;
          setTimeout(step, speed);
        } else {
          typingText.style.borderRight = '0';
        }
      };
      step();
    }

    /* ---------- fireworks (simple particles) ---------- */
    const fw = document.getElementById('fireworks');
    fw.width = fw.offsetWidth * devicePixelRatio;
    fw.height = 220 * devicePixelRatio;
    fw.style.width = '100%';
    fw.style.height = '220px';
    const fctx = fw.getContext('2d');
    fctx.scale(devicePixelRatio, devicePixelRatio);
    let particles = [];

    function rand(min,max){return Math.random()*(max-min)+min}
    function createExplosion(x,y){
      const count = 30 + Math.floor(Math.random()*50);
      for(let i=0;i<count;i++){
        particles.push({
          x, y,
          vx: rand(-4,4),
          vy: rand(-6, -1.2),
          life: rand(40,100),
          age:0,
          color: `hsl(${Math.random()*360},80%,60%)`
        });
      }
    }
    function boom(){
      // create bursts across width
      const w = fw.clientWidth;
      for(let i=0;i<5;i++){
        createExplosion(rand(50,w-50), rand(40,140));
      }
    }
    function fwLoop(){
      fctx.clearRect(0,0,fw.width, fw.height);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.age++;
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.08; // gravity
        const alpha = 1 - p.age / p.life;
        if(alpha <= 0){particles.splice(i,1); continue;}
        fctx.beginPath();
        fctx.fillStyle = `rgba(255,255,255,${alpha*0.8})`;
        fctx.shadowBlur = 10;
        fctx.shadowColor = p.color;
        fctx.fillStyle = p.color.replace('hsl','hsla').replace(')', `,${alpha})`);
        fctx.arc(p.x, p.y, 3,0,Math.PI*2);
        fctx.fill();
      }
      requestAnimationFrame(fwLoop);
    }
    fwLoop();

    /* ---------- polaroid click to enlarge (simple) ---------- */
    document.querySelectorAll('.polaroid').forEach(p=>{
      p.addEventListener('click', ()=> {
        const img = p.querySelector('img').src;
        openLightbox(img);
      });
    });
    function openLightbox(src){
      const overlay = document.createElement('div');
      overlay.style.position='fixed';overlay.style.inset=0;overlay.style.background='rgba(0,0,0,0.8)';overlay.style.display='flex';overlay.style.alignItems='center';overlay.style.justifyContent='center';overlay.style.zIndex=9999;
      const img = document.createElement('img'); img.src = src; img.style.maxWidth='90%'; img.style.maxHeight='90%'; img.style.borderRadius='10px'; overlay.appendChild(img);
      overlay.onclick = ()=> overlay.remove();
      document.body.appendChild(overlay);
    }

    /* ---------- flipbook small tweak ---------- */
    // already toggled by onclick in markup

    /* ---------- reasons interactive ---------- */
    function addReason(){
      const val = document.getElementById('reasonInput').value.trim();
      if(!val) return;
      const wrapper = document.createElement('div');
      wrapper.className = 'list-item';
      wrapper.innerHTML = `<span>${escapeHtml(val)}</span><div><button class="heart-btn" onclick="toggleHeart(this)">‚ô°</button>&nbsp;<button onclick="removeItem(this)" style="background:#222;border-radius:6px;padding:6px;border:0;color:#fff;cursor:pointer">‚úï</button></div>`;
      document.getElementById('reasonsList').prepend(wrapper);
      document.getElementById('reasonInput').value='';
    }
    function toggleHeart(el){
      if(el.innerText === '‚ô°'){ el.innerText='‚ù§Ô∏è'; el.style.transform='scale(1.08)'; }
      else { el.innerText='‚ô°'; el.style.transform='scale(1)'; }
    }
    function removeItem(btn){
      btn.closest('.list-item').remove();
    }
    function escapeHtml(s){ return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    /* ---------- starry night + constellation drawing ---------- */
    const c = document.getElementById('stars');
    function resizeStars(){
      c.width = c.clientWidth * devicePixelRatio;
      c.height = c.clientHeight * devicePixelRatio;
      c.getContext('2d').scale(devicePixelRatio, devicePixelRatio);
    }
    // set canvas CSS height (so clientHeight exists)
    c.style.height = '360px';
    c.style.width = '100%';
    resizeStars();

    const ctx = c.getContext('2d');
    const W = c.clientWidth;
    const H = c.clientHeight;
    // generate random background stars
    const bgStars = [];
    for(let i=0;i<120;i++) bgStars.push({x:Math.random()*W, y:Math.random()*H, r:Math.random()*1.6 + 0.3, a: Math.random()});

    function drawSky(){
      ctx.clearRect(0,0,c.clientWidth,c.clientHeight);
      // gradient
      const grad = ctx.createLinearGradient(0,0,0,c.clientHeight);
      grad.addColorStop(0,'#07102b'); grad.addColorStop(1,'#000012');
      ctx.fillStyle = grad; ctx.fillRect(0,0,c.clientWidth,c.clientHeight);
      // draw stars
      bgStars.forEach(s => {
        ctx.beginPath();
        ctx.globalAlpha = 0.6 + 0.4*Math.sin(Date.now()/1000 + s.a*10);
        ctx.fillStyle = 'white';
        ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
      });
      ctx.globalAlpha = 1;
    }

    // simple constellation for initials ‚Äî define coordinates relative to canvas size
    // Example: connect 3 points for letter 'A' and 2 for 'J' ‚Äî replace with your initials mapping
    const constellations = {
      // coordinates as percentage [x%, y%] to be scalable
      "A": [[25,25],[20,60],[30,60],[25,25],[34,60]],
      "J": [[45,20],[45,60],[55,75]]
    };

    function drawConstellation(initial, color='#ff9ab3'){
      const points = constellations[initial] || [];
      ctx.strokeStyle = color; ctx.lineWidth = 1.6; ctx.beginPath();
      points.forEach((p,i)=>{
        const x = p[0]/100 * c.clientWidth;
        const y = p[1]/100 * c.clientHeight;
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
        // draw node
        ctx.fillStyle = color;
        ctx.beginPath(); ctx.arc(x,y,4,0,Math.PI*2); ctx.fill();
      });
      ctx.globalAlpha = 0.9;
      ctx.stroke();
      ctx.globalAlpha = 1;
    }

    // animate stars + draw constellations
    function skyLoop(){
      drawSky();
      // example: draw two initials side-by-side
      drawConstellation('A','#ff9ab3');
      drawConstellation('J','#ffd1a9');
      requestAnimationFrame(skyLoop);
    }
    skyLoop();

    // click to twinkle and trigger small fireworks near mouse
    c.addEventListener('click', (ev)=>{
      const rect = c.getBoundingClientRect();
      const x = ev.clientX - rect.left;
      const y = ev.clientY - rect.top;
      // small twinkle
      for(let i=0;i<8;i++){
        bgStars.push({x: x + rand(-30,30), y: y + rand(-30,30), r: rand(0.3,1.6), a: Math.random()});
      }
      // also trigger fireworks visually in fireworks canvas
      createExplosion(x, Math.max(40, y*0.6));
    });

    // small utility rand used above
    function rand(min,max){return Math.random()*(max-min)+min}

    /* ---------- ensure canvases resize on window resize ---------- */
    window.addEventListener('resize', ()=> {
      // fireworks canvas
      fw.width = fw.offsetWidth * devicePixelRatio;
      fw.height = 220 * devicePixelRatio;
      fctx.scale(devicePixelRatio, devicePixelRatio);
      // stars canvas
      resizeStars();
    });
  </script>
</body>
</html>
